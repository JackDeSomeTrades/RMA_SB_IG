task_config:
  seed: 43

  env:
    num_envs: 1024
    num_observations: 59
    num_privileged_obs: None # if not None a privilege_obs_buf will be returned by step() (critic obs for assymetric training). None is returned otherwise
    num_actions: 12
    env_spacing: 3. 
    send_timeouts: True # send time out information to the algorithm
    episode_length_s : 60
    # episode length in seconds

  terrain:
    mesh_type: 'none' # "heightfield" # none, plane, heightfield or trimesh
    horizontal_scale: 0.1 # [m]
    vertical_scale: 0.005 # [m]
    border_size: 25 # [m]
    static_friction: 1.0
    dynamic_friction: 1.0
    restitution: 0.
    num_rows: 10 # number of terrain rows (levels)
    num_cols: 20 # number of terrain cols (types)

  init_state:
    rot: [0.0, 0.0, 0.0, 1.0] # x,y,z,w [quat]
    lin_vel: [0.0, 0.0, 0.0]  # x,y,z [m/s]
    ang_vel: [0.0, 0.0, 0.0]  # x,y,z [rad/s]
    pos: [0.0, 0.0, 0.0]  # x,y,z [m]
    default_joint_angles: {  # = target angles [rad] when action = 0.0
    # for each joint, from the urdf again.
    }
asset:
    file: '{ROOT_DIR}/resources/robots/soto_gripper/soto_gripper.urdf'
    name: "soto_gripper" #actor name
    foot_name: "FOOT" # name of the feet bodies, used to index body state and contact force tensors
    penalize_contacts_on: [] # important to provide the sidebar links all around the end effector
    terminate_after_contacts_on: ["base_link"]
    self_collisions: 0  # 1 to disable, 0 to enable...bitwise filter
    disable_gravity: False
    collapse_fixed_joints: True # merge bodies connected by fixed joints. Specific fixed joints can be kept by adding " <... dont_collapse="true">
    fix_base_link: True # so the base shouldn't be allowed to move no matter what 
    default_dof_drive_mode: 3 # see GymDofDriveModeFlags (0 is none, 1 is pos tgt, 2 is vel tgt, 3 effort)
    replace_cylinder_with_capsule: True
    flip_visual_attachments: False # imp: this is the flag that was giving us issues. 

#   domain_rand:
#     randomize_friction: False
#     friction_range: [0.05, 4.5]
#     randomize_base_mass: True
#     added_mass_range: [0., 6.]
#     randomize_com: True
#     com_distribution_range: [-0.15, 0.15]
#     push_robots: True
#     push_interval_s: 15
#     max_push_vel_xy: 1.
#     randomize_motor_strength: True
#     motor_strength_range: [0.90, 1.10]

#   rewards:
#     only_positive_rewards: False # if true negative total rewards are clipped at zero (avoids early termination problems)
#     tracking_sigma: 0.25 # tracking reward: exp(-error^2/sigma)
#     soft_dof_vel_limit: 1.
#     soft_torque_limit: 1.
#     max_contact_force: 100. # forces above this value are penalized
#     soft_dof_pos_limit: 0.9 # percentage of urdf limits, values above this limit are penalized
#     base_height_target: 0.42
#     scales:
# #        termination: -10.0   # 0.0
#         tracking_lin_vel: 20.0
#         tracking_ang_vel: 10.0
#         lin_vel_z: -2.0
# #        ang_vel_xy: -0.05
# #        dof_vel: -0.
# #        dof_acc: -2.5e-7
#         base_height: -2.0
# #        feet_air_time: 1.0
# #        collision: -1.
#         feet_stumble: -0.025
# #        action_rate: -0.01
# #        stand_still: -0.0005
# #        torques: -0.0002
# #        dof_pos_limits: -10.0
#         # RMA rewards #
# #        forward: 20.0
# #        lateral_movement_rotation: -21.0
# #        orientation: -1.5
# #        work: -0.002
# #        ground_impact: -0.02
# #        smoothness: -0.001
# #        action_magnitude: -0.07
# #        joint_speed: -0.002

# #        z_acceleration: -2.0
# #        foot_slip: -0.8


#   normalization:
#     clip_observations: 100.
#     clip_actions: 100.
#     obs_scales:
#         lin_vel: 2.0
#         ang_vel: 0.25
#         dof_pos: 1.0
#         dof_vel: 0.05
#         height_measurements: 5.0

#   noise:
#     add_noise: True
#     noise_level: 1.0 # scales other values
#     noise_scales:
#       dof_pos: 0.01
#       dof_vel: 1.5
#       lin_vel: 0.1
#       ang_vel: 0.2
#       gravity: 0.05
#       height_measurements: 0.1
#       motor_strength: 0.5

# # viewer camera:
#   viewer:
#     ref_env: 0
#     pos: [10, 0, 6]  # [m]
#     lookat: [11., 5, 3.]  # [m]

#   sim:
#     dt: 0.005
#     substeps: 1
#     gravity: [0., 0. ,-9.81]  # [m/s^2]
#     up_axis: 1  # 0 is y, 1 is z
#     physx:
#       num_threads: 10
#       solver_type: 1  # 0: pgs, 1: tgs
#       num_position_iterations: 4
#       num_velocity_iterations: 0
#       contact_offset: 0.01  # [m]
#       rest_offset: 0.0   # [m]
#       bounce_threshold_velocity: 0.5 #0.5 [m/s]
#       max_depenetration_velocity: 1.0
#       max_gpu_contact_pairs: 2**23 #2**24 -> needed for 8000 envs and more
#       default_buffer_size_multiplier: 5
#       contact_collection: 2 # 0: never, 1: last sub-step, 2: all sub-steps (default=2)

# rl_config:
#   device: 'cuda:0'
# #  batchsize_p1: 80000
#   num_iterations_p1: 15000
#   n_timesteps: 18000000
#   normalize: True
#   logging:
#     dir: '{ROOT_DIR}/logs/'
#   ppo:
#     n_steps: 24 # TODO: adapt to your setting
#     batch_size: 6144 # TODO: adapt to your setting
# #    n_epochs: 5
#     gae_lambda: 0.95
#     gamma: 0.99
#     n_epochs: 10
#     ent_coef: 0.01
#     lr: 1e-3
#     clip_range: 0.2
#     max_grad_norm: 1.0
#     vf_coef: 1.0
#     # use_sde: False
#     # sde_sample_freq: 4

# arch_config:
#   device: 'cuda:0'
#   state_action_horizon: 50
#   encoder:
#     encoded_extrinsic_size: 8
#     action_space_size: 12
#     state_space_size: 30
#     env_size: 17
#   adaptation:
#     epochs: 500
#     optimizer: 'Adam'
#     lr: 5.0e-4
#     loss: 'mse'
